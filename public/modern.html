<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tennis Tiebreaker - Modern UI</title>
    <style>
        :root {
            --primary-color: #2980b9;
            --primary-dark: #1a5276;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --border-color: #e0e0e0;
            --text-color: #333;
            --light-text: #666;
            --success-color: #27ae60;
            --error-color: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f5f8fa;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5rem;
            text-align: center;
            margin: 0;
            font-weight: 600;
        }
        
        h1, h2, h3 {
            color: var(--primary-dark);
            margin-bottom: 15px;
        }
        
        .section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .section h2 {
            border-bottom: 2px solid var(--light-bg);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-radius: 6px;
            overflow: hidden;
        }
        
        th, td {
            border: 1px solid var(--border-color);
            padding: 12px 15px;
            text-align: left;
        }
        
        th {
            background-color: var(--light-bg);
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:hover {
            background-color: #f1f5f9;
        }
        
        form {
            margin-top: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--primary-dark);
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        button:hover {
            background-color: var(--primary-dark);
        }
        
        .error {
            color: var(--error-color);
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .success {
            color: var(--success-color);
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .quick-add {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-match {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quick-button {
            padding: 12px 10px;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }
        
        .quick-button:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <header>
        <h1>Big 12 Tennis Tiebreaker System</h1>
    </header>
    
    <div class="container">
        <div class="section">
            <h2>Add Match Results</h2>
            
            <h3>Quick Add Teams</h3>
            <div class="quick-add">
                <div class="quick-button" data-team="UCF" data-target="team1">UCF</div>
                <div class="quick-button" data-team="Texas Tech" data-target="team1">Texas Tech</div>
                <div class="quick-button" data-team="Oklahoma State" data-target="team1">Oklahoma State</div>
                <div class="quick-button" data-team="Baylor" data-target="team1">Baylor</div>
                <div class="quick-button" data-team="Arizona State" data-target="team1">Arizona State</div>
                <div class="quick-button" data-team="TCU" data-target="team1">TCU</div>
                <div class="quick-button" data-team="Arizona" data-target="team1">Arizona</div>
                <div class="quick-button" data-team="BYU" data-target="team1">BYU</div>
                <div class="quick-button" data-team="UCF" data-target="team2">UCF</div>
                <div class="quick-button" data-team="Texas Tech" data-target="team2">Texas Tech</div>
                <div class="quick-button" data-team="Oklahoma State" data-target="team2">Oklahoma State</div>
                <div class="quick-button" data-team="Baylor" data-target="team2">Baylor</div>
                <div class="quick-button" data-team="Arizona State" data-target="team2">Arizona State</div>
                <div class="quick-button" data-team="TCU" data-target="team2">TCU</div>
                <div class="quick-button" data-team="Arizona" data-target="team2">Arizona</div>
                <div class="quick-button" data-team="BYU" data-target="team2">BYU</div>
            </div>
            
            <h3>Quick Add Matches</h3>
            <div class="quick-match">
                <div class="quick-button" data-match="UCF 4-3 Texas Tech">UCF 4-3 Texas Tech</div>
                <div class="quick-button" data-match="Baylor 4-2 Arizona State">Baylor 4-2 Arizona State</div>
                <div class="quick-button" data-match="Arizona State 4-1 TCU">Arizona State 4-1 TCU</div>
                <div class="quick-button" data-match="TCU 4-3 Baylor">TCU 4-3 Baylor</div>
                <div class="quick-button" data-match="BYU 4-2 Kansas State">BYU 4-2 Kansas State</div>
                <div class="quick-button" data-match="Cincinnati 4-3 Colorado">Cincinnati 4-3 Colorado</div>
            </div>
            
            <form id="match-form">
                <div class="form-row" style="display: flex; gap: 20px;">
                    <div style="flex: 1;">
                        <label for="team1">Team 1</label>
                        <input type="text" id="team1" name="team1" required>
                    </div>
                    <div style="flex: 1;">
                        <label for="team2">Team 2</label>
                        <input type="text" id="team2" name="team2" required>
                    </div>
                </div>
                
                <div class="form-row" style="display: flex; gap: 20px;">
                    <div style="flex: 1;">
                        <label for="team1_score">Team 1 Score</label>
                        <input type="number" id="team1_score" name="team1_score" required>
                    </div>
                    <div style="flex: 1;">
                        <label for="team2_score">Team 2 Score</label>
                        <input type="number" id="team2_score" name="team2_score" required>
                    </div>
                </div>
                
                <input type="hidden" id="match_date" name="match_date" value="">
                <input type="hidden" id="conference" name="conference" value="Big 12">
                
                <button type="submit">Add Match</button>
            </form>
            
            <div id="add-error" class="error"></div>
            <div id="add-success" class="success"></div>
        </div>
        
        <div class="section">
            <h2>Conference Standings</h2>
            <button id="refresh-standings">Refresh Standings</button>
            <div id="standings-container"></div>
            <div id="standings-error" class="error"></div>
        </div>
        
        <div class="section">
            <h2>Match History</h2>
            <button id="view-matches">View Matches</button>
            <div id="matches-container"></div>
            <div id="matches-error" class="error"></div>
        </div>
        
        <div class="section">
            <h2>Head-to-Head Comparison</h2>
            <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div style="flex: 1;">
                    <label for="h2h-team1">Team 1</label>
                    <input type="text" id="h2h-team1" name="h2h-team1">
                </div>
                <div style="flex: 1;">
                    <label for="h2h-team2">Team 2</label>
                    <input type="text" id="h2h-team2" name="h2h-team2">
                </div>
            </div>
            <button id="compare-teams">Compare Teams</button>
            <div id="h2h-container"></div>
            <div id="h2h-error" class="error"></div>
        </div>
    </div>
    
    <script>
        // Set today's date when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date
            document.getElementById('match_date').value = new Date().toISOString().split('T')[0];
            
            // Add event listener for the match form
            const matchForm = document.getElementById('match-form');
            matchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    team1: document.getElementById('team1').value,
                    team2: document.getElementById('team2').value,
                    team1_score: parseInt(document.getElementById('team1_score').value),
                    team2_score: parseInt(document.getElementById('team2_score').value),
                    match_date: document.getElementById('match_date').value,
                    conference: document.getElementById('conference').value
                };
                
                addMatch(formData);
            });
            
            // Team quick buttons
            document.querySelectorAll('.quick-button[data-team]').forEach(button => {
                button.addEventListener('click', function() {
                    const team = this.getAttribute('data-team');
                    const target = this.getAttribute('data-target');
                    document.getElementById(target).value = team;
                });
            });
            
            // Match quick buttons
            document.querySelectorAll('.quick-button[data-match]').forEach(button => {
                button.addEventListener('click', function() {
                    const matchText = this.getAttribute('data-match');
                    const parts = matchText.split(' ');
                    const team1 = parts[0];
                    const scoreText = parts[1];
                    const team2 = parts.slice(2).join(' ');
                    
                    const scores = scoreText.split('-');
                    const score1 = parseInt(scores[0]);
                    const score2 = parseInt(scores[1]);
                    
                    quickAddMatch(team1, team2, score1, score2);
                });
            });
            
            // Button event listeners
            document.getElementById('refresh-standings').addEventListener('click', loadStandings);
            document.getElementById('view-matches').addEventListener('click', loadMatches);
            document.getElementById('compare-teams').addEventListener('click', loadHeadToHead);
            
            // Load initial data
            loadStandings();
            loadMatches();
        });
        
        // Quick add a match
        function quickAddMatch(team1, team2, score1, score2) {
            const match = {
                team1: team1,
                team2: team2,
                team1_score: score1,
                team2_score: score2,
                match_date: document.getElementById('match_date').value,
                conference: 'Big 12'
            };
            
            addMatch(match);
        }
        
        // Send match data to the server
        function addMatch(matchData) {
            // Reset messages
            const addError = document.getElementById('add-error');
            const addSuccess = document.getElementById('add-success');
            
            addError.textContent = '';
            addSuccess.textContent = '';
            
            fetch('/api/matches', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(matchData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to add match');
                }
                return response.json();
            })
            .then(data => {
                addSuccess.textContent = 
                    `Match added: ${matchData.team1} ${matchData.team1_score}-${matchData.team2_score} ${matchData.team2}`;
                
                // Clear form fields
                document.getElementById('team1').value = '';
                document.getElementById('team2').value = '';
                document.getElementById('team1_score').value = '';
                document.getElementById('team2_score').value = '';
                
                // Refresh data
                loadStandings();
                loadMatches();
            })
            .catch(error => {
                addError.textContent = error.message;
            });
        }
        
        // Load standings
        function loadStandings() {
            const standingsContainer = document.getElementById('standings-container');
            const standingsError = document.getElementById('standings-error');
            
            standingsContainer.innerHTML = '<p>Loading standings...</p>';
            standingsError.textContent = '';
            
            fetch('/api/tiebreaker/Big 12')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load standings');
                    }
                    return response.json();
                })
                .then(data => {
                    if (!data.regular_standings || data.regular_standings.length === 0) {
                        standingsContainer.innerHTML = '<p>No standings data available.</p>';
                        return;
                    }
                    
                    // Create container for the standings
                    standingsContainer.innerHTML = '';
                    
                    // Final seedings
                    const seedingsSection = document.createElement('div');
                    seedingsSection.className = 'seedings-section';
                    
                    const seedingsHeader = document.createElement('h3');
                    seedingsHeader.textContent = 'Final Tournament Seedings';
                    seedingsSection.appendChild(seedingsHeader);
                    
                    const seedingsGrid = document.createElement('div');
                    seedingsGrid.className = 'seedings-grid';
                    seedingsGrid.style.display = 'grid';
                    seedingsGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(220px, 1fr))';
                    seedingsGrid.style.gap = '15px';
                    seedingsGrid.style.marginTop = '20px';
                    
                    data.final_seedings.forEach(team => {
                        const teamCard = document.createElement('div');
                        teamCard.className = 'team-card';
                        teamCard.style.backgroundColor = 'white';
                        teamCard.style.borderRadius = '8px';
                        teamCard.style.overflow = 'hidden';
                        teamCard.style.boxShadow = '0 3px 10px rgba(0,0,0,0.08)';
                        teamCard.style.transition = 'transform 0.3s, box-shadow 0.3s';
                        
                        let tiebreakerInfo = '';
                        if (team.tiebreaker_applied) {
                            tiebreakerInfo = `<div style="margin-top: 8px; font-size: 0.8rem; color: var(--accent-color);">Tiebreaker: ${team.tiebreaker_applied}</div>`;
                        }
                        
                        teamCard.innerHTML = `
                            <div style="display: flex; padding: 15px;">
                                <div style="background: var(--primary-color); color: white; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin-right: 15px; font-weight: bold; font-size: 1.2rem;">${team.seed}</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: bold; font-size: 1.1rem; margin-bottom: 5px;">${team.team}</div>
                                    <div style="color: var(--light-text);">${team.wins}-${team.losses} (${(team.win_percentage * 100).toFixed(1)}%)</div>
                                    ${tiebreakerInfo}
                                </div>
                            </div>
                        `;
                        
                        teamCard.addEventListener('mouseover', function() {
                            this.style.transform = 'translateY(-5px)';
                            this.style.boxShadow = '0 8px 15px rgba(0,0,0,0.1)';
                        });
                        
                        teamCard.addEventListener('mouseout', function() {
                            this.style.transform = '';
                            this.style.boxShadow = '0 3px 10px rgba(0,0,0,0.08)';
                        });
                        
                        seedingsGrid.appendChild(teamCard);
                    });
                    
                    seedingsSection.appendChild(seedingsGrid);
                    standingsContainer.appendChild(seedingsSection);
                    
                    // Regular standings
                    const regularSection = document.createElement('div');
                    regularSection.className = 'regular-standings';
                    regularSection.style.marginTop = '30px';
                    
                    const regularHeader = document.createElement('h3');
                    regularHeader.textContent = 'Regular Season Standings';
                    regularSection.appendChild(regularHeader);
                    
                    const standingsTable = document.createElement('table');
                    standingsTable.className = 'standings-table';
                    standingsTable.innerHTML = `
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>MP</th>
                                <th>W</th>
                                <th>L</th>
                                <th>Win %</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    `;
                    
                    const tbody = standingsTable.querySelector('tbody');
                    
                    data.regular_standings.forEach(team => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${team.team}</td>
                            <td>${team.matches_played}</td>
                            <td>${team.wins}</td>
                            <td>${team.losses}</td>
                            <td>${(team.win_percentage * 100).toFixed(1)}%</td>
                        `;
                        tbody.appendChild(row);
                    });
                    
                    regularSection.appendChild(standingsTable);
                    standingsContainer.appendChild(regularSection);
                })
                .catch(error => {
                    standingsError.textContent = error.message;
                });
        }
        
        // Load matches
        function loadMatches() {
            const matchesContainer = document.getElementById('matches-container');
            const matchesError = document.getElementById('matches-error');
            
            matchesContainer.innerHTML = '<p>Loading matches...</p>';
            matchesError.textContent = '';
            
            fetch('/api/matches')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load matches');
                    }
                    return response.json();
                })
                .then(data => {
                    matchesContainer.innerHTML = '';
                    
                    if (data.length === 0) {
                        matchesContainer.innerHTML = '<div style="text-align: center; color: var(--light-text); padding: 30px; background-color: var(--light-bg); border-radius: 8px;">No match data available. Add some matches to see them here.</div>';
                        return;
                    }
                    
                    // Group matches by date
                    const matchesByDate = {};
                    data.forEach(match => {
                        const date = new Date(match.match_date);
                        const dateString = date.toLocaleDateString('en-US', { 
                            weekday: 'short', 
                            month: 'short', 
                            day: 'numeric', 
                            year: 'numeric' 
                        });
                        
                        if (!matchesByDate[dateString]) {
                            matchesByDate[dateString] = [];
                        }
                        
                        matchesByDate[dateString].push(match);
                    });
                    
                    // Create match cards for each date
                    const matchTimeline = document.createElement('div');
                    matchTimeline.style.marginTop = '20px';
                    
                    Object.keys(matchesByDate).sort((a, b) => {
                        return new Date(b) - new Date(a); // Sort descending
                    }).forEach(dateString => {
                        const dateGroup = document.createElement('div');
                        dateGroup.style.marginBottom = '30px';
                        
                        const dateHeader = document.createElement('h3');
                        dateHeader.style.fontSize = '1.1rem';
                        dateHeader.style.color = 'var(--light-text)';
                        dateHeader.style.marginBottom = '15px';
                        dateHeader.style.borderBottom = '1px solid var(--border-color)';
                        dateHeader.style.paddingBottom = '8px';
                        dateHeader.textContent = dateString;
                        dateGroup.appendChild(dateHeader);
                        
                        const matchesList = document.createElement('div');
                        matchesList.style.display = 'grid';
                        matchesList.style.gridTemplateColumns = 'repeat(auto-fill, minmax(250px, 1fr))';
                        matchesList.style.gap = '15px';
                        
                        matchesByDate[dateString].forEach(match => {
                            const matchCard = document.createElement('div');
                            matchCard.style.backgroundColor = 'white';
                            matchCard.style.borderRadius = '8px';
                            matchCard.style.padding = '15px';
                            matchCard.style.boxShadow = '0 2px 8px rgba(0,0,0,0.06)';
                            matchCard.style.transition = 'transform 0.2s, box-shadow 0.2s';
                            
                            matchCard.addEventListener('mouseover', function() {
                                this.style.transform = 'translateY(-3px)';
                                this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                            });
                            
                            matchCard.addEventListener('mouseout', function() {
                                this.style.transform = '';
                                this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.06)';
                            });
                            
                            const team1Won = match.team1_score > match.team2_score;
                            const team2Won = match.team2_score > match.team1_score;
                            
                            matchCard.innerHTML = `
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                    <div style="text-align: center; flex: 1;">
                                        <div style="margin-bottom: 8px; font-size: 0.9rem;">${match.team1}</div>
                                        <div style="background-color: ${team1Won ? 'var(--primary-color)' : 'var(--light-bg)'}; color: ${team1Won ? 'white' : 'var(--text-color)'}; font-size: 1.5rem; font-weight: bold; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin: 0 auto;">${match.team1_score}</div>
                                    </div>
                                    <div style="font-size: 0.8rem; color: var(--light-text); margin: 0 10px;">VS</div>
                                    <div style="text-align: center; flex: 1;">
                                        <div style="margin-bottom: 8px; font-size: 0.9rem;">${match.team2}</div>
                                        <div style="background-color: ${team2Won ? 'var(--primary-color)' : 'var(--light-bg)'}; color: ${team2Won ? 'white' : 'var(--text-color)'}; font-size: 1.5rem; font-weight: bold; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin: 0 auto;">${match.team2_score}</div>
                                    </div>
                                </div>
                                <div style="font-size: 0.8rem; color: var(--light-text); text-align: center; border-top: 1px solid var(--border-color); padding-top: 10px;">
                                    <div>${match.conference}</div>
                                </div>
                            `;
                            
                            matchesList.appendChild(matchCard);
                        });
                        
                        dateGroup.appendChild(matchesList);
                        matchTimeline.appendChild(dateGroup);
                    });
                    
                    matchesContainer.appendChild(matchTimeline);
                })
                .catch(error => {
                    matchesError.textContent = error.message;
                });
        }
        
        // Load head-to-head
        function loadHeadToHead() {
            const h2hContainer = document.getElementById('h2h-container');
            const h2hError = document.getElementById('h2h-error');
            const team1 = document.getElementById('h2h-team1').value;
            const team2 = document.getElementById('h2h-team2').value;
            
            if (!team1 || !team2) {
                h2hError.textContent = 'Please enter both teams';
                return;
            }
            
            h2hContainer.innerHTML = '<p>Loading head-to-head comparison...</p>';
            h2hError.textContent = '';
            
            fetch(`/api/head-to-head/${encodeURIComponent(team1)}/${encodeURIComponent(team2)}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load head-to-head data');
                    }
                    return response.json();
                })
                .then(data => {
                    // Check if data is valid
                    if (!data.matches || !data[team1] || !data[team2]) {
                        h2hContainer.innerHTML = '<p>No matches found between these teams.</p>';
                        return;
                    }
                    
                    h2hContainer.innerHTML = '';
                    
                    // Create head-to-head summary
                    const summaryDiv = document.createElement('div');
                    summaryDiv.style.backgroundColor = '#f8f9fa';
                    summaryDiv.style.borderRadius = '8px';
                    summaryDiv.style.padding = '20px';
                    summaryDiv.style.marginBottom = '30px';
                    summaryDiv.style.textAlign = 'center';
                    
                    // Determine which team has a better record for styling
                    const team1Wins = data[team1];
                    const team2Wins = data[team2];
                    
                    summaryDiv.innerHTML = `
                        <div style="margin-bottom: 20px;">
                            <h3 style="font-size: 1.6rem; margin-bottom: 5px;">${team1} vs ${team2}</h3>
                            <p style="color: var(--light-text); font-size: 1.1rem;">${data.winner !== 'Tied' ? `${data.winner} leads the series` : 'Series is tied'}</p>
                        </div>
                        <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
                            <div style="text-align: center; padding: 15px 25px; border-radius: 8px; background-color: ${team1Wins > team2Wins ? 'var(--success-color)' : 'white'}; color: ${team1Wins > team2Wins ? 'white' : 'var(--text-color)'}; box-shadow: 0 3px 10px rgba(0,0,0,0.05); min-width: 120px; ${team1Wins <= team2Wins ? 'border: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: bold; margin-bottom: 10px;">${team1}</div>
                                <div style="font-size: 2.5rem; font-weight: bold;">${team1Wins}</div>
                            </div>
                            <div style="height: 50px; display: flex; align-items: center; justify-content: center; color: var(--light-text); font-weight: bold;">
                                <span>VS</span>
                            </div>
                            <div style="text-align: center; padding: 15px 25px; border-radius: 8px; background-color: ${team2Wins > team1Wins ? 'var(--success-color)' : 'white'}; color: ${team2Wins > team1Wins ? 'white' : 'var(--text-color)'}; box-shadow: 0 3px 10px rgba(0,0,0,0.05); min-width: 120px; ${team2Wins <= team1Wins ? 'border: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: bold; margin-bottom: 10px;">${team2}</div>
                                <div style="font-size: 2.5rem; font-weight: bold;">${team2Wins}</div>
                            </div>
                        </div>
                    `;
                    
                    h2hContainer.appendChild(summaryDiv);
                    
                    // Add match history
                    if (data.matches.length > 0) {
                        const historyDiv = document.createElement('div');
                        historyDiv.innerHTML = '<h3 style="margin-bottom: 15px;">Match History</h3>';
                        
                        const table = document.createElement('table');
                        table.innerHTML = `
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Team 1</th>
                                    <th>Score</th>
                                    <th>Team 2</th>
                                    <th>Winner</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        `;
                        
                        const tbody = table.querySelector('tbody');
                        
                        data.matches.forEach(match => {
                            const date = new Date(match.match_date).toLocaleDateString();
                            const isTeam1Winner = match.team1_score > match.team2_score;
                            const winner = isTeam1Winner ? match.team1 : match.team2;
                            const isSelectedTeam1Winner = (match.team1 === team1 && isTeam1Winner) || (match.team2 === team1 && !isTeam1Winner);
                            
                            const row = document.createElement('tr');
                            row.style.backgroundColor = isSelectedTeam1Winner ? 'rgba(39, 174, 96, 0.1)' : 'rgba(231, 76, 60, 0.1)';
                            
                            row.innerHTML = `
                                <td>${date}</td>
                                <td>${match.team1}</td>
                                <td><strong>${match.team1_score} - ${match.team2_score}</strong></td>
                                <td>${match.team2}</td>
                                <td><span style="font-weight: bold; color: var(--primary-color);">${winner}</span></td>
                            `;
                            
                            tbody.appendChild(row);
                        });
                        
                        historyDiv.appendChild(table);
                        h2hContainer.appendChild(historyDiv);
                    } else {
                        h2hContainer.innerHTML += '<p>No match history available between these teams.</p>';
                    }
                })
                .catch(error => {
                    h2hError.textContent = error.message;
                });
        }
    </script>
</body>
</html> 